{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BrowseStep = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _Flex = require(\"@strapi/design-system/Flex\");\n\nvar _Stack = require(\"@strapi/design-system/Stack\");\n\nvar _Box = require(\"@strapi/design-system/Box\");\n\nvar _EmptyPictures = _interopRequireDefault(require(\"@strapi/icons/EmptyPictures\"));\n\nvar _BaseCheckbox = require(\"@strapi/design-system/BaseCheckbox\");\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _getTrad = _interopRequireDefault(require(\"../../../utils/getTrad\"));\n\nvar _getAllowedFiles = _interopRequireDefault(require(\"../../../utils/getAllowedFiles\"));\n\nvar _AssetList = require(\"../../AssetList\");\n\nvar _EmptyAssets = require(\"../../EmptyAssets\");\n\nvar _Filters = require(\"./Filters\");\n\nvar _PaginationFooter = _interopRequireDefault(require(\"./PaginationFooter\"));\n\nvar _PageSize = _interopRequireDefault(require(\"./PageSize\"));\n\nvar _SearchAsset = _interopRequireDefault(require(\"./SearchAsset\"));\n\nvar _SortPicker = _interopRequireDefault(require(\"../../SortPicker\"));\n\nvar StartBlockActions = /*#__PURE__*/(0, _styledComponents[\"default\"])(_Flex.Flex).withConfig({\n  displayName: \"BrowseStep__StartBlockActions\",\n  componentId: \"sc-1g4sauj-0\"\n})([\"& > * + *{margin-left:\", \";}margin-left:\", \";\"], function (_ref) {\n  var theme = _ref.theme;\n  return theme.spaces[2];\n}, function (_ref2) {\n  var pullRight = _ref2.pullRight;\n  return pullRight ? 'auto' : undefined;\n});\nvar EndBlockActions = /*#__PURE__*/(0, _styledComponents[\"default\"])(StartBlockActions).withConfig({\n  displayName: \"BrowseStep__EndBlockActions\",\n  componentId: \"sc-1g4sauj-1\"\n})([\"flex-shrink:0;\"]);\n\nvar BrowseStep = function BrowseStep(_ref3) {\n  var allowedTypes = _ref3.allowedTypes,\n      assets = _ref3.assets,\n      multiple = _ref3.multiple,\n      onChangeFilters = _ref3.onChangeFilters,\n      onChangePage = _ref3.onChangePage,\n      onChangePageSize = _ref3.onChangePageSize,\n      onChangeSearch = _ref3.onChangeSearch,\n      onChangeSort = _ref3.onChangeSort,\n      onEditAsset = _ref3.onEditAsset,\n      onSelectAllAsset = _ref3.onSelectAllAsset,\n      onSelectAsset = _ref3.onSelectAsset,\n      pagination = _ref3.pagination,\n      queryObject = _ref3.queryObject,\n      selectedAssets = _ref3.selectedAssets;\n\n  var _useIntl = (0, _reactIntl.useIntl)(),\n      formatMessage = _useIntl.formatMessage;\n\n  var allAllowedAsset = (0, _getAllowedFiles[\"default\"])(allowedTypes, assets);\n  var areAllAssetSelected = allAllowedAsset.every(function (asset) {\n    return selectedAssets.findIndex(function (currAsset) {\n      return currAsset.id === asset.id;\n    }) !== -1;\n  }) && selectedAssets.length > 0;\n  var hasSomeAssetSelected = allAllowedAsset.some(function (asset) {\n    return selectedAssets.findIndex(function (currAsset) {\n      return currAsset.id === asset.id;\n    }) !== -1;\n  });\n  return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(_Stack.Stack, {\n    spacing: 4\n  }, onSelectAllAsset && /*#__PURE__*/_react[\"default\"].createElement(_Box.Box, null, /*#__PURE__*/_react[\"default\"].createElement(_Box.Box, {\n    paddingBottom: 4\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Flex.Flex, {\n    justifyContent: \"space-between\",\n    alignItems: \"flex-start\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(StartBlockActions, {\n    wrap: \"wrap\"\n  }, multiple && /*#__PURE__*/_react[\"default\"].createElement(_Flex.Flex, {\n    paddingLeft: 2,\n    paddingRight: 2,\n    background: \"neutral0\",\n    hasRadius: true,\n    borderColor: \"neutral200\",\n    height: \"\".concat(32 / 16, \"rem\")\n  }, /*#__PURE__*/_react[\"default\"].createElement(_BaseCheckbox.BaseCheckbox, {\n    \"aria-label\": formatMessage({\n      id: (0, _getTrad[\"default\"])('bulk.select.label'),\n      defaultMessage: 'Select all assets'\n    }),\n    indeterminate: !areAllAssetSelected && hasSomeAssetSelected,\n    value: areAllAssetSelected,\n    onChange: onSelectAllAsset\n  })), /*#__PURE__*/_react[\"default\"].createElement(_SortPicker[\"default\"], {\n    onChangeSort: onChangeSort\n  }), /*#__PURE__*/_react[\"default\"].createElement(_Filters.Filters, {\n    appliedFilters: queryObject.filters.$and,\n    onChangeFilters: onChangeFilters\n  })), /*#__PURE__*/_react[\"default\"].createElement(EndBlockActions, {\n    pullRight: true\n  }, /*#__PURE__*/_react[\"default\"].createElement(_SearchAsset[\"default\"], {\n    onChangeSearch: onChangeSearch,\n    queryValue: queryObject._q || ''\n  }))))), assets.length > 0 ? /*#__PURE__*/_react[\"default\"].createElement(_AssetList.AssetList, {\n    allowedTypes: allowedTypes,\n    size: \"S\",\n    assets: assets,\n    onSelectAsset: onSelectAsset,\n    selectedAssets: selectedAssets,\n    onEditAsset: onEditAsset\n  }) : /*#__PURE__*/_react[\"default\"].createElement(_Box.Box, {\n    paddingBottom: 6\n  }, /*#__PURE__*/_react[\"default\"].createElement(_EmptyAssets.EmptyAssets, {\n    icon: _EmptyPictures[\"default\"],\n    size: \"S\",\n    count: 6,\n    content: formatMessage({\n      id: (0, _getTrad[\"default\"])('list.assets-empty.search'),\n      defaultMessage: 'No result found'\n    })\n  }))), pagination.pageCount > 0 && /*#__PURE__*/_react[\"default\"].createElement(_Flex.Flex, {\n    justifyContent: \"space-between\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_PageSize[\"default\"], {\n    pageSize: queryObject.pageSize,\n    onChangePageSize: onChangePageSize\n  }), /*#__PURE__*/_react[\"default\"].createElement(_PaginationFooter[\"default\"], {\n    activePage: queryObject.page,\n    onChangePage: onChangePage,\n    pagination: pagination\n  })));\n};\n\nexports.BrowseStep = BrowseStep;\nBrowseStep.defaultProps = {\n  allowedTypes: [],\n  multiple: false,\n  onSelectAllAsset: undefined,\n  onEditAsset: undefined\n};\nBrowseStep.propTypes = {\n  allowedTypes: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].string),\n  assets: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].shape({})).isRequired,\n  multiple: _propTypes[\"default\"].bool,\n  onChangeFilters: _propTypes[\"default\"].func.isRequired,\n  onChangePage: _propTypes[\"default\"].func.isRequired,\n  onChangePageSize: _propTypes[\"default\"].func.isRequired,\n  onChangeSort: _propTypes[\"default\"].func.isRequired,\n  onChangeSearch: _propTypes[\"default\"].func.isRequired,\n  onEditAsset: _propTypes[\"default\"].func,\n  onSelectAsset: _propTypes[\"default\"].func.isRequired,\n  onSelectAllAsset: _propTypes[\"default\"].func,\n  queryObject: _propTypes[\"default\"].shape({\n    filters: _propTypes[\"default\"].object,\n    page: _propTypes[\"default\"].number.isRequired,\n    pageSize: _propTypes[\"default\"].number.isRequired,\n    _q: _propTypes[\"default\"].string\n  }).isRequired,\n  pagination: _propTypes[\"default\"].shape({\n    pageCount: _propTypes[\"default\"].number.isRequired\n  }).isRequired,\n  selectedAssets: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].shape({})).isRequired\n};","map":null,"metadata":{},"sourceType":"script"}