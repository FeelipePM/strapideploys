{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _get = _interopRequireDefault(require(\"lodash/get\"));\n\nvar hasLocalePermission = function hasLocalePermission(permissions, localeCode) {\n  if (permissions) {\n    var hasPermission = permissions.some(function (permission) {\n      return (0, _get[\"default\"])(permission, 'properties.locales', []).includes(localeCode);\n    });\n\n    if (hasPermission) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nvar getFirstLocale = function getFirstLocale(permissions) {\n  if (permissions && permissions.length > 0) {\n    var firstAuthorizedNonDefaultLocale = (0, _get[\"default\"])(permissions, [0, 'properties', 'locales', 0], null);\n\n    if (firstAuthorizedNonDefaultLocale) {\n      return firstAuthorizedNonDefaultLocale;\n    }\n  }\n\n  return null;\n};\n/**\n * Entry point of the module\n */\n\n\nvar getDefaultLocale = function getDefaultLocale(ctPermissions) {\n  var locales = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var defaultLocale = locales.find(function (locale) {\n    return locale.isDefault;\n  });\n\n  if (!defaultLocale) {\n    return null;\n  }\n\n  var readPermissions = ctPermissions['plugin::content-manager.explorer.read'];\n  var createPermissions = ctPermissions['plugin::content-manager.explorer.create'];\n\n  if (hasLocalePermission(readPermissions, defaultLocale.code)) {\n    return defaultLocale.code;\n  }\n\n  if (hasLocalePermission(createPermissions, defaultLocale.code)) {\n    return defaultLocale.code;\n  } // When the default locale is not authorized, we return the first authorized locale\n\n\n  var firstAuthorizedForReadNonDefaultLocale = getFirstLocale(readPermissions);\n\n  if (firstAuthorizedForReadNonDefaultLocale) {\n    return firstAuthorizedForReadNonDefaultLocale;\n  }\n\n  return getFirstLocale(createPermissions);\n};\n\nvar _default = getDefaultLocale;\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}