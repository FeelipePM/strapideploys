{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _Box = require(\"@strapi/design-system/Box\");\n\nvar _Flex = require(\"@strapi/design-system/Flex\");\n\nvar _Typography = require(\"@strapi/design-system/Typography\");\n\nvar _Select = require(\"@strapi/design-system/Select\");\n\nvar _upperFirst = _interopRequireDefault(require(\"lodash/upperFirst\"));\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _constants = require(\"../../Permissions/utils/constants\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nvar IS_DISABLED = function () {\n  if (window && window.strapi && window.strapi.isEE) {\n    return require('../../../../../../../../../../ee/admin/pages/SettingsPage/pages/Roles/EditPage/components/ConditionsModal/ActionRow/utils/constants')[\"default\"];\n  }\n\n  return require('./utils/constants')[\"default\"];\n}();\n\nvar FlexWrapper = /*#__PURE__*/(0, _styledComponents[\"default\"])(_Flex.Flex).withConfig({\n  displayName: \"ActionRow__FlexWrapper\",\n  componentId: \"sc-1bqpgdl-0\"\n})([\"height:\", \";\"], _constants.rowHeight);\n\nvar ActionRow = function ActionRow(_ref) {\n  var arrayOfOptionsGroupedByCategory = _ref.arrayOfOptionsGroupedByCategory,\n      isFormDisabled = _ref.isFormDisabled,\n      isGrey = _ref.isGrey,\n      label = _ref.label,\n      name = _ref.name,\n      onChange = _ref.onChange,\n      value = _ref.value;\n\n  var _useIntl = (0, _reactIntl.useIntl)(),\n      formatMessage = _useIntl.formatMessage;\n\n  var options = arrayOfOptionsGroupedByCategory.reduce(function (arr, curr) {\n    var _curr = (0, _slicedToArray2[\"default\"])(curr, 2),\n        label = _curr[0],\n        children = _curr[1];\n\n    var obj = {\n      label: (0, _upperFirst[\"default\"])(label),\n      children: children.map(function (child) {\n        return {\n          label: child.displayName,\n          value: child.id\n        };\n      })\n    };\n    return [].concat((0, _toConsumableArray2[\"default\"])(arr), [obj]);\n  }, []); // Output: ['value1', 'value2']\n\n  var values = Object.values(value).map(function (x) {\n    return Object.entries(x).filter(function (_ref2) {\n      var _ref3 = (0, _slicedToArray2[\"default\"])(_ref2, 2),\n          value = _ref3[1];\n\n      return value;\n    }).map(function (_ref4) {\n      var _ref5 = (0, _slicedToArray2[\"default\"])(_ref4, 1),\n          key = _ref5[0];\n\n      return key;\n    });\n  }).flat(); // ! Only expects arrayOfOpt to be [['default', obj]] - might break in future changes\n\n  var handleChange = function handleChange(val) {\n    var _arrayOfOptionsGroupe = (0, _slicedToArray2[\"default\"])(arrayOfOptionsGroupedByCategory, 1),\n        _arrayOfOptionsGroupe2 = (0, _slicedToArray2[\"default\"])(_arrayOfOptionsGroupe[0], 2),\n        values = _arrayOfOptionsGroupe2[1];\n\n    var formattedValues = values.reduce(function (acc, curr) {\n      return _objectSpread((0, _defineProperty2[\"default\"])({}, curr.id, val.includes(curr.id)), acc);\n    }, {});\n    onChange(name, formattedValues);\n  };\n\n  return /*#__PURE__*/_react[\"default\"].createElement(FlexWrapper, {\n    as: \"li\",\n    background: isGrey ? 'neutral100' : 'neutral0'\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Flex.Flex, {\n    paddingLeft: 6,\n    style: {\n      width: 180\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Typography.Typography, {\n    variant: \"sigma\",\n    textColor: \"neutral600\"\n  }, formatMessage({\n    id: 'Settings.permissions.conditions.can',\n    defaultMessage: 'Can'\n  }), \"\\xA0\"), /*#__PURE__*/_react[\"default\"].createElement(_Typography.Typography, {\n    variant: \"sigma\",\n    title: label,\n    textColor: \"primary600\",\n    ellipsis: true\n  }, formatMessage({\n    id: \"Settings.roles.form.permissions.\".concat(label.toLowerCase()),\n    defaultMessage: label\n  })), /*#__PURE__*/_react[\"default\"].createElement(_Typography.Typography, {\n    variant: \"sigma\",\n    textColor: \"neutral600\"\n  }, \"\\xA0\", formatMessage({\n    id: 'Settings.permissions.conditions.when',\n    defaultMessage: 'When'\n  }))), /*#__PURE__*/_react[\"default\"].createElement(_Box.Box, {\n    style: {\n      maxWidth: 430,\n      width: '100%'\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Select.MultiSelectNested, {\n    id: name,\n    customizeContent: function customizeContent(values) {\n      return \"\".concat(values.length, \" currently selected\");\n    },\n    onChange: handleChange,\n    value: values,\n    options: options,\n    disabled: isFormDisabled || IS_DISABLED\n  })));\n};\n\nActionRow.propTypes = {\n  arrayOfOptionsGroupedByCategory: _propTypes[\"default\"].array.isRequired,\n  isFormDisabled: _propTypes[\"default\"].bool.isRequired,\n  isGrey: _propTypes[\"default\"].bool.isRequired,\n  label: _propTypes[\"default\"].string.isRequired,\n  name: _propTypes[\"default\"].string.isRequired,\n  value: _propTypes[\"default\"].object.isRequired,\n  onChange: _propTypes[\"default\"].func.isRequired\n};\nvar _default = ActionRow;\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}