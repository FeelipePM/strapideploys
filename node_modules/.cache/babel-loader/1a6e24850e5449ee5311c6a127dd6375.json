{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _helperPlugin = require(\"@strapi/helper-plugin\");\n\nvar _ModalLayout = require(\"@strapi/design-system/ModalLayout\");\n\nvar _Tabs = require(\"@strapi/design-system/Tabs\");\n\nvar _Button = require(\"@strapi/design-system/Button\");\n\nvar _Typography = require(\"@strapi/design-system/Typography\");\n\nvar _Divider = require(\"@strapi/design-system/Divider\");\n\nvar _Box = require(\"@strapi/design-system/Box\");\n\nvar _Flex = require(\"@strapi/design-system/Flex\");\n\nvar _Check = _interopRequireDefault(require(\"@strapi/icons/Check\"));\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _formik = require(\"formik\");\n\nvar _schemas = _interopRequireDefault(require(\"../../schemas\"));\n\nvar _utils = require(\"../../utils\");\n\nvar _useAddLocale2 = _interopRequireDefault(require(\"../../hooks/useAddLocale\"));\n\nvar _BaseForm = _interopRequireDefault(require(\"./BaseForm\"));\n\nvar _AdvancedForm = _interopRequireDefault(require(\"./AdvancedForm\"));\n\nvar initialFormValues = {\n  code: '',\n  displayName: '',\n  isDefault: false\n};\n\nvar ModalCreate = function ModalCreate(_ref) {\n  var onClose = _ref.onClose;\n\n  var _useAddLocale = (0, _useAddLocale2[\"default\"])(),\n      isAdding = _useAddLocale.isAdding,\n      addLocale = _useAddLocale.addLocale;\n\n  var _useIntl = (0, _reactIntl.useIntl)(),\n      formatMessage = _useIntl.formatMessage;\n\n  var _useRBACProvider = (0, _helperPlugin.useRBACProvider)(),\n      refetchPermissions = _useRBACProvider.refetchPermissions;\n  /**\n   * No need to explicitly call the onClose prop here\n   * since the all tree (from the root of the page) is destroyed and re-mounted\n   * because of the RBAC refreshing and the potential move of the default locale\n   */\n\n\n  var handleLocaleAdd = /*#__PURE__*/function () {\n    var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(values) {\n      return _regenerator[\"default\"].wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return addLocale({\n                code: values.code,\n                name: values.displayName,\n                isDefault: values.isDefault\n              });\n\n            case 2:\n              _context.next = 4;\n              return refetchPermissions();\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleLocaleAdd(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_ModalLayout.ModalLayout, {\n    onClose: onClose,\n    labelledBy: \"add-locale-title\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_formik.Formik, {\n    initialValues: initialFormValues,\n    onSubmit: handleLocaleAdd,\n    validationSchema: _schemas[\"default\"],\n    validateOnChange: false\n  }, /*#__PURE__*/_react[\"default\"].createElement(_helperPlugin.Form, null, /*#__PURE__*/_react[\"default\"].createElement(_ModalLayout.ModalHeader, null, /*#__PURE__*/_react[\"default\"].createElement(_Typography.Typography, {\n    fontWeight: \"bold\",\n    textColor: \"neutral800\",\n    as: \"h2\",\n    id: \"add-locale-title\"\n  }, formatMessage({\n    id: (0, _utils.getTrad)('Settings.list.actions.add'),\n    defaultMessage: 'Add new locale'\n  }))), /*#__PURE__*/_react[\"default\"].createElement(_ModalLayout.ModalBody, null, /*#__PURE__*/_react[\"default\"].createElement(_Tabs.TabGroup, {\n    label: formatMessage({\n      id: (0, _utils.getTrad)('Settings.locales.modal.title'),\n      defaultMessage: 'Configurations'\n    }),\n    id: \"tabs\",\n    variant: \"simple\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Flex.Flex, {\n    justifyContent: \"space-between\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Typography.Typography, {\n    as: \"h2\",\n    variant: \"beta\"\n  }, formatMessage({\n    id: (0, _utils.getTrad)('Settings.locales.modal.title'),\n    defaultMessage: 'Configurations'\n  })), /*#__PURE__*/_react[\"default\"].createElement(_Tabs.Tabs, null, /*#__PURE__*/_react[\"default\"].createElement(_Tabs.Tab, null, formatMessage({\n    id: (0, _utils.getTrad)('Settings.locales.modal.base'),\n    defaultMessage: 'Base settings'\n  })), /*#__PURE__*/_react[\"default\"].createElement(_Tabs.Tab, null, formatMessage({\n    id: (0, _utils.getTrad)('Settings.locales.modal.advanced'),\n    defaultMessage: 'Advanced settings'\n  })))), /*#__PURE__*/_react[\"default\"].createElement(_Divider.Divider, null), /*#__PURE__*/_react[\"default\"].createElement(_Box.Box, {\n    paddingTop: 7,\n    paddingBottom: 7\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Tabs.TabPanels, null, /*#__PURE__*/_react[\"default\"].createElement(_Tabs.TabPanel, null, /*#__PURE__*/_react[\"default\"].createElement(_BaseForm[\"default\"], null)), /*#__PURE__*/_react[\"default\"].createElement(_Tabs.TabPanel, null, /*#__PURE__*/_react[\"default\"].createElement(_AdvancedForm[\"default\"], null)))))), /*#__PURE__*/_react[\"default\"].createElement(_ModalLayout.ModalFooter, {\n    startActions: /*#__PURE__*/_react[\"default\"].createElement(_Button.Button, {\n      variant: \"tertiary\",\n      onClick: onClose\n    }, formatMessage({\n      id: 'app.components.Button.cancel',\n      defaultMessage: 'Cancel'\n    })),\n    endActions: /*#__PURE__*/_react[\"default\"].createElement(_Button.Button, {\n      type: \"submit\",\n      startIcon: /*#__PURE__*/_react[\"default\"].createElement(_Check[\"default\"], null),\n      disabled: isAdding\n    }, formatMessage({\n      id: 'app.components.Button.save',\n      defaultMessage: 'Save'\n    }))\n  }))));\n};\n\nModalCreate.propTypes = {\n  onClose: _propTypes[\"default\"].func.isRequired\n};\nvar _default = ModalCreate;\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}