{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _helperPlugin = require(\"@strapi/helper-plugin\");\n\nvar _ArrowLeft = _interopRequireDefault(require(\"@strapi/icons/ArrowLeft\"));\n\nvar _Check = _interopRequireDefault(require(\"@strapi/icons/Check\"));\n\nvar _Play = _interopRequireDefault(require(\"@strapi/icons/Play\"));\n\nvar _Layout = require(\"@strapi/design-system/Layout\");\n\nvar _Box = require(\"@strapi/design-system/Box\");\n\nvar _Button = require(\"@strapi/design-system/Button\");\n\nvar _Link = require(\"@strapi/design-system/Link\");\n\nvar _Stack = require(\"@strapi/design-system/Stack\");\n\nvar _TextInput = require(\"@strapi/design-system/TextInput\");\n\nvar _Grid = require(\"@strapi/design-system/Grid\");\n\nvar _formik = require(\"formik\");\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _EventInput = _interopRequireDefault(require(\"../EventInput\"));\n\nvar _HeadersInput = _interopRequireDefault(require(\"../HeadersInput\"));\n\nvar _TriggerContainer = _interopRequireDefault(require(\"../TriggerContainer\"));\n\nvar _schema = _interopRequireDefault(require(\"../utils/schema\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar WebhookForm = function WebhookForm(_ref) {\n  var handleSubmit = _ref.handleSubmit,\n      data = _ref.data,\n      triggerWebhook = _ref.triggerWebhook,\n      isCreating = _ref.isCreating,\n      isTriggering = _ref.isTriggering,\n      triggerResponse = _ref.triggerResponse,\n      isDraftAndPublishEvents = _ref.isDraftAndPublishEvents;\n\n  var _useIntl = (0, _reactIntl.useIntl)(),\n      formatMessage = _useIntl.formatMessage;\n\n  var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      showTriggerResponse = _useState2[0],\n      setShowTriggerResponse = _useState2[1];\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_formik.Formik, {\n    onSubmit: handleSubmit,\n    initialValues: {\n      name: (data === null || data === void 0 ? void 0 : data.name) || '',\n      url: (data === null || data === void 0 ? void 0 : data.url) || '',\n      headers: Object.keys((data === null || data === void 0 ? void 0 : data.headers) || []).length ? Object.entries(data.headers).map(function (_ref2) {\n        var _ref3 = (0, _slicedToArray2[\"default\"])(_ref2, 2),\n            key = _ref3[0],\n            value = _ref3[1];\n\n        return {\n          key: key,\n          value: value\n        };\n      }) : [{\n        key: '',\n        value: ''\n      }],\n      events: (data === null || data === void 0 ? void 0 : data.events) || []\n    },\n    validationSchema: _schema[\"default\"],\n    validateOnChange: false,\n    validateOnBlur: false\n  }, function (_ref4) {\n    var handleSubmit = _ref4.handleSubmit,\n        errors = _ref4.errors;\n    return /*#__PURE__*/_react[\"default\"].createElement(_helperPlugin.Form, {\n      noValidate: true\n    }, /*#__PURE__*/_react[\"default\"].createElement(_Layout.HeaderLayout, {\n      primaryAction: /*#__PURE__*/_react[\"default\"].createElement(_Stack.Stack, {\n        horizontal: true,\n        spacing: 2\n      }, /*#__PURE__*/_react[\"default\"].createElement(_Button.Button, {\n        onClick: function onClick() {\n          triggerWebhook();\n          setShowTriggerResponse(true);\n        },\n        variant: \"tertiary\",\n        startIcon: /*#__PURE__*/_react[\"default\"].createElement(_Play[\"default\"], null),\n        disabled: isCreating || isTriggering,\n        size: \"L\"\n      }, formatMessage({\n        id: 'Settings.webhooks.trigger',\n        defaultMessage: 'Trigger'\n      })), /*#__PURE__*/_react[\"default\"].createElement(_Button.Button, {\n        startIcon: /*#__PURE__*/_react[\"default\"].createElement(_Check[\"default\"], null),\n        onClick: handleSubmit,\n        type: \"submit\",\n        size: \"L\"\n      }, formatMessage({\n        id: 'app.components.Button.save',\n        defaultMessage: 'Save'\n      }))),\n      title: isCreating ? formatMessage({\n        id: 'Settings.webhooks.create',\n        defaultMessage: 'Create a webhook'\n      }) : data === null || data === void 0 ? void 0 : data.name,\n      navigationAction: /*#__PURE__*/_react[\"default\"].createElement(_Link.Link, {\n        startIcon: /*#__PURE__*/_react[\"default\"].createElement(_ArrowLeft[\"default\"], null),\n        to: \"/settings/webhooks\"\n      }, formatMessage({\n        id: 'app.components.go-back',\n        defaultMessage: 'Back'\n      }))\n    }), /*#__PURE__*/_react[\"default\"].createElement(_Layout.ContentLayout, null, /*#__PURE__*/_react[\"default\"].createElement(_Stack.Stack, {\n      spacing: 4\n    }, showTriggerResponse && /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"trigger-wrapper\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(_TriggerContainer[\"default\"], {\n      isPending: isTriggering,\n      response: triggerResponse,\n      onCancel: function onCancel() {\n        return setShowTriggerResponse(false);\n      }\n    })), /*#__PURE__*/_react[\"default\"].createElement(_Box.Box, {\n      background: \"neutral0\",\n      padding: 8,\n      shadow: \"filterShadow\",\n      hasRadius: true\n    }, /*#__PURE__*/_react[\"default\"].createElement(_Stack.Stack, {\n      spacing: 6\n    }, /*#__PURE__*/_react[\"default\"].createElement(_Grid.Grid, {\n      gap: 6\n    }, /*#__PURE__*/_react[\"default\"].createElement(_Grid.GridItem, {\n      col: 6\n    }, /*#__PURE__*/_react[\"default\"].createElement(_formik.Field, {\n      as: _TextInput.TextInput,\n      name: \"name\",\n      error: errors.name && formatMessage({\n        id: errors.name\n      }),\n      label: formatMessage({\n        id: 'Settings.webhooks.form.name',\n        defaultMessage: 'Name'\n      }),\n      required: true\n    })), /*#__PURE__*/_react[\"default\"].createElement(_Grid.GridItem, {\n      col: 12\n    }, /*#__PURE__*/_react[\"default\"].createElement(_formik.Field, {\n      as: _TextInput.TextInput,\n      name: \"url\",\n      error: errors.url && formatMessage({\n        id: errors.url\n      }),\n      label: formatMessage({\n        id: 'Settings.roles.form.input.url',\n        defaultMessage: 'Url'\n      }),\n      required: true\n    }))), /*#__PURE__*/_react[\"default\"].createElement(_HeadersInput[\"default\"], null), /*#__PURE__*/_react[\"default\"].createElement(_EventInput[\"default\"], {\n      isDraftAndPublish: isDraftAndPublishEvents\n    }))))));\n  });\n};\n\nWebhookForm.propTypes = {\n  data: _propTypes[\"default\"].object,\n  handleSubmit: _propTypes[\"default\"].func.isRequired,\n  triggerWebhook: _propTypes[\"default\"].func.isRequired,\n  isCreating: _propTypes[\"default\"].bool.isRequired,\n  isDraftAndPublishEvents: _propTypes[\"default\"].bool.isRequired,\n  isTriggering: _propTypes[\"default\"].bool.isRequired,\n  triggerResponse: _propTypes[\"default\"].object\n};\nWebhookForm.defaultProps = {\n  data: undefined,\n  triggerResponse: undefined\n};\nvar _default = WebhookForm;\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}