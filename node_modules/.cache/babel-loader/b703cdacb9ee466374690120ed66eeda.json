{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.createPermissionsArrayFromCategory = exports.createPermission = exports.createConditionsArray = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\n/**\n * Returns an array of condition names when a condition is enabled\n * @param {object} conditions\n * @config {boolean}\n */\nvar createConditionsArray = function createConditionsArray(conditions) {\n  return Object.entries(conditions).filter(function (_ref) {\n    var _ref2 = (0, _slicedToArray2[\"default\"])(_ref, 2),\n        conditionValue = _ref2[1];\n\n    return conditionValue;\n  }).map(function (_ref3) {\n    var _ref4 = (0, _slicedToArray2[\"default\"])(_ref3, 1),\n        conditionName = _ref4[0];\n\n    return conditionName;\n  });\n};\n\nexports.createConditionsArray = createConditionsArray;\n\nvar createPermission = function createPermission(array) {\n  var _array = (0, _slicedToArray2[\"default\"])(array, 2),\n      actionName = _array[0],\n      conditions = _array[1].conditions;\n\n  return {\n    action: actionName,\n    subject: null,\n    conditions: createConditionsArray(conditions),\n    properties: {}\n  };\n};\n\nexports.createPermission = createPermission;\n\nvar createPermissionsArrayFromCategory = function createPermissionsArrayFromCategory(categoryPermissions) {\n  return Object.values(categoryPermissions).reduce(function (acc, current) {\n    var permissions = Object.entries(current).reduce(function (acc1, current1) {\n      var _current = (0, _slicedToArray2[\"default\"])(current1, 2),\n          enabled = _current[1].properties.enabled;\n\n      if (!enabled) {\n        return acc1;\n      }\n\n      var permission = createPermission(current1);\n      acc1.push(permission);\n      return acc1;\n    }, []);\n    return [].concat((0, _toConsumableArray2[\"default\"])(acc), (0, _toConsumableArray2[\"default\"])(permissions));\n  }, []);\n};\n\nexports.createPermissionsArrayFromCategory = createPermissionsArrayFromCategory;\n\nvar formatSettingsPermissionsToAPI = function formatSettingsPermissionsToAPI(settingsPermissionsObject) {\n  return Object.values(settingsPermissionsObject).reduce(function (acc, current) {\n    var currentCategoryPermissions = createPermissionsArrayFromCategory(current);\n    return [].concat((0, _toConsumableArray2[\"default\"])(acc), (0, _toConsumableArray2[\"default\"])(currentCategoryPermissions));\n  }, []);\n};\n\nvar _default = formatSettingsPermissionsToAPI;\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}