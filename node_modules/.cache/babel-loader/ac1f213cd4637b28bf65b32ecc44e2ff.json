{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _reactFastCompare = _interopRequireDefault(require(\"react-fast-compare\"));\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _reactFontawesome = require(\"@fortawesome/react-fontawesome\");\n\nvar _Accordion = require(\"@strapi/design-system/Accordion\");\n\nvar _IconButton = require(\"@strapi/design-system/IconButton\");\n\nvar _FocusTrap = require(\"@strapi/design-system/FocusTrap\");\n\nvar _Box = require(\"@strapi/design-system/Box\");\n\nvar _Stack = require(\"@strapi/design-system/Stack\");\n\nvar _Trash = _interopRequireDefault(require(\"@strapi/icons/Trash\"));\n\nvar _ArrowDown = _interopRequireDefault(require(\"@strapi/icons/ArrowDown\"));\n\nvar _ArrowUp = _interopRequireDefault(require(\"@strapi/icons/ArrowUp\"));\n\nvar _hooks = require(\"../../../../hooks\");\n\nvar _utils = require(\"../../../../utils\");\n\nvar _FieldComponent = _interopRequireDefault(require(\"../../../FieldComponent\"));\n\nvar _Rectangle = _interopRequireDefault(require(\"./Rectangle\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar ActionStack = /*#__PURE__*/(0, _styledComponents[\"default\"])(_Stack.Stack).withConfig({\n  displayName: \"Component__ActionStack\",\n  componentId: \"sc-1avgasp-0\"\n})([\"svg{path{fill:\", \";}}\"], function (_ref) {\n  var theme = _ref.theme,\n      expanded = _ref.expanded;\n  return expanded ? theme.colors.primary600 : theme.colors.neutral600;\n});\nvar IconButtonCustom = /*#__PURE__*/(0, _styledComponents[\"default\"])(_IconButton.IconButton).withConfig({\n  displayName: \"Component__IconButtonCustom\",\n  componentId: \"sc-1avgasp-1\"\n})([\"background-color:transparent;\"]);\nvar StyledBox = /*#__PURE__*/(0, _styledComponents[\"default\"])(_Box.Box).withConfig({\n  displayName: \"Component__StyledBox\",\n  componentId: \"sc-1avgasp-2\"\n})([\"> div:first-child{box-shadow:\", \";}\"], function (_ref2) {\n  var theme = _ref2.theme;\n  return theme.shadows.tableShadow;\n});\nvar AccordionContentRadius = /*#__PURE__*/(0, _styledComponents[\"default\"])(_Box.Box).withConfig({\n  displayName: \"Component__AccordionContentRadius\",\n  componentId: \"sc-1avgasp-3\"\n})([\"border-radius:0 0 \", \" \", \";\"], function (_ref3) {\n  var theme = _ref3.theme;\n  return theme.spaces[1];\n}, function (_ref4) {\n  var theme = _ref4.theme;\n  return theme.spaces[1];\n});\n\nvar Component = function Component(_ref5) {\n  var componentUid = _ref5.componentUid,\n      formErrors = _ref5.formErrors,\n      index = _ref5.index,\n      isOpen = _ref5.isOpen,\n      isFieldAllowed = _ref5.isFieldAllowed,\n      moveComponentDown = _ref5.moveComponentDown,\n      moveComponentUp = _ref5.moveComponentUp,\n      name = _ref5.name,\n      _onToggle = _ref5.onToggle,\n      removeComponentFromDynamicZone = _ref5.removeComponentFromDynamicZone,\n      showDownIcon = _ref5.showDownIcon,\n      showUpIcon = _ref5.showUpIcon;\n\n  var _useIntl = (0, _reactIntl.useIntl)(),\n      formatMessage = _useIntl.formatMessage;\n\n  var _useContentTypeLayout = (0, _hooks.useContentTypeLayout)(),\n      getComponentLayout = _useContentTypeLayout.getComponentLayout;\n\n  var _useMemo = (0, _react.useMemo)(function () {\n    var _getComponentLayout = getComponentLayout(componentUid),\n        _getComponentLayout$i = _getComponentLayout.info,\n        icon = _getComponentLayout$i.icon,\n        displayName = _getComponentLayout$i.displayName;\n\n    return {\n      friendlyName: displayName,\n      icon: icon\n    };\n  }, [componentUid, getComponentLayout]),\n      icon = _useMemo.icon,\n      friendlyName = _useMemo.friendlyName;\n\n  var handleMoveComponentDown = function handleMoveComponentDown() {\n    return moveComponentDown(name, index);\n  };\n\n  var handleMoveComponentUp = function handleMoveComponentUp() {\n    return moveComponentUp(name, index);\n  };\n\n  var handleRemove = function handleRemove() {\n    return removeComponentFromDynamicZone(name, index);\n  };\n\n  var downLabel = formatMessage({\n    id: (0, _utils.getTrad)('components.DynamicZone.move-down-label'),\n    defaultMessage: 'Move component down'\n  });\n  var upLabel = formatMessage({\n    id: (0, _utils.getTrad)('components.DynamicZone.move-up-label'),\n    defaultMessage: 'Move component down'\n  });\n  var deleteLabel = formatMessage({\n    id: (0, _utils.getTrad)('components.DynamicZone.delete-label'),\n    defaultMessage: 'Delete {name}'\n  }, {\n    name: friendlyName\n  });\n  var formErrorsKeys = Object.keys(formErrors);\n  var fieldsErrors = formErrorsKeys.filter(function (errorKey) {\n    var errorKeysArray = errorKey.split('.');\n\n    if (\"\".concat(errorKeysArray[0], \".\").concat(errorKeysArray[1]) === \"\".concat(name, \".\").concat(index)) {\n      return true;\n    }\n\n    return false;\n  });\n  var errorMessage;\n\n  if (fieldsErrors.length > 0) {\n    errorMessage = formatMessage({\n      id: (0, _utils.getTrad)('components.DynamicZone.error-message'),\n      defaultMessage: 'The component contains error(s)'\n    });\n  }\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_Box.Box, null, /*#__PURE__*/_react[\"default\"].createElement(_Rectangle[\"default\"], null), /*#__PURE__*/_react[\"default\"].createElement(StyledBox, {\n    hasRadius: true\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Accordion.Accordion, {\n    expanded: isOpen,\n    onToggle: function onToggle() {\n      return _onToggle(index);\n    },\n    size: \"S\",\n    error: errorMessage\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Accordion.AccordionToggle, {\n    startIcon: /*#__PURE__*/_react[\"default\"].createElement(_reactFontawesome.FontAwesomeIcon, {\n      icon: icon\n    }),\n    action: /*#__PURE__*/_react[\"default\"].createElement(ActionStack, {\n      horizontal: true,\n      spacing: 0,\n      expanded: isOpen\n    }, showDownIcon && /*#__PURE__*/_react[\"default\"].createElement(IconButtonCustom, {\n      noBorder: true,\n      label: downLabel,\n      onClick: handleMoveComponentDown,\n      icon: /*#__PURE__*/_react[\"default\"].createElement(_ArrowDown[\"default\"], null)\n    }), showUpIcon && /*#__PURE__*/_react[\"default\"].createElement(IconButtonCustom, {\n      noBorder: true,\n      label: upLabel,\n      onClick: handleMoveComponentUp,\n      icon: /*#__PURE__*/_react[\"default\"].createElement(_ArrowUp[\"default\"], null)\n    }), isFieldAllowed && /*#__PURE__*/_react[\"default\"].createElement(IconButtonCustom, {\n      noBorder: true,\n      label: deleteLabel,\n      onClick: handleRemove,\n      icon: /*#__PURE__*/_react[\"default\"].createElement(_Trash[\"default\"], null)\n    })),\n    title: friendlyName,\n    togglePosition: \"left\"\n  }), /*#__PURE__*/_react[\"default\"].createElement(_Accordion.AccordionContent, null, /*#__PURE__*/_react[\"default\"].createElement(AccordionContentRadius, {\n    background: \"neutral0\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_FocusTrap.FocusTrap, {\n    onEscape: function onEscape() {\n      return _onToggle(index);\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(_FieldComponent[\"default\"], {\n    componentUid: componentUid,\n    icon: icon,\n    name: \"\".concat(name, \".\").concat(index),\n    isFromDynamicZone: true\n  })))))));\n};\n\nComponent.propTypes = {\n  componentUid: _propTypes[\"default\"].string.isRequired,\n  formErrors: _propTypes[\"default\"].object.isRequired,\n  index: _propTypes[\"default\"].number.isRequired,\n  isFieldAllowed: _propTypes[\"default\"].bool.isRequired,\n  isOpen: _propTypes[\"default\"].bool.isRequired,\n  moveComponentDown: _propTypes[\"default\"].func.isRequired,\n  moveComponentUp: _propTypes[\"default\"].func.isRequired,\n  name: _propTypes[\"default\"].string.isRequired,\n  onToggle: _propTypes[\"default\"].func.isRequired,\n  removeComponentFromDynamicZone: _propTypes[\"default\"].func.isRequired,\n  showDownIcon: _propTypes[\"default\"].bool.isRequired,\n  showUpIcon: _propTypes[\"default\"].bool.isRequired\n};\n\nvar _default = /*#__PURE__*/(0, _react.memo)(Component, _reactFastCompare[\"default\"]);\n\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}