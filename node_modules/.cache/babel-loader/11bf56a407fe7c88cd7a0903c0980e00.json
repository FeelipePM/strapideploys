{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ListRow = ListRow;\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _get = _interopRequireDefault(require(\"lodash/get\"));\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _IconButton = require(\"@strapi/design-system/IconButton\");\n\nvar _Flex = require(\"@strapi/design-system/Flex\");\n\nvar _Stack = require(\"@strapi/design-system/Stack\");\n\nvar _Typography = require(\"@strapi/design-system/Typography\");\n\nvar _Box = require(\"@strapi/design-system/Box\");\n\nvar _Lock = _interopRequireDefault(require(\"@strapi/icons/Lock\"));\n\nvar _Pencil = _interopRequireDefault(require(\"@strapi/icons/Pencil\"));\n\nvar _Trash = _interopRequireDefault(require(\"@strapi/icons/Trash\"));\n\nvar _helperPlugin = require(\"@strapi/helper-plugin\");\n\nvar _useDataManager2 = _interopRequireDefault(require(\"../../hooks/useDataManager\"));\n\nvar _getTrad = _interopRequireDefault(require(\"../../utils/getTrad\"));\n\nvar _Curve = _interopRequireDefault(require(\"../../icons/Curve\"));\n\nvar _UpperFirst = _interopRequireDefault(require(\"../UpperFirst\"));\n\nvar _BoxWrapper = _interopRequireDefault(require(\"./BoxWrapper\"));\n\nvar _AttributeIcon = _interopRequireDefault(require(\"../AttributeIcon\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction ListRow(_ref) {\n  var configurable = _ref.configurable,\n      editTarget = _ref.editTarget,\n      firstLoopComponentUid = _ref.firstLoopComponentUid,\n      isFromDynamicZone = _ref.isFromDynamicZone,\n      name = _ref.name,\n      onClick = _ref.onClick,\n      relation = _ref.relation,\n      repeatable = _ref.repeatable,\n      secondLoopComponentUid = _ref.secondLoopComponentUid,\n      target = _ref.target,\n      targetUid = _ref.targetUid,\n      type = _ref.type;\n\n  var _useDataManager = (0, _useDataManager2[\"default\"])(),\n      contentTypes = _useDataManager.contentTypes,\n      isInDevelopmentMode = _useDataManager.isInDevelopmentMode,\n      removeAttribute = _useDataManager.removeAttribute;\n\n  var _useIntl = (0, _reactIntl.useIntl)(),\n      formatMessage = _useIntl.formatMessage;\n\n  var isMorph = type === 'relation' && relation.includes('morph');\n  var ico = ['integer', 'biginteger', 'float', 'decimal'].includes(type) ? 'number' : type;\n  var readableType = type;\n\n  if (['integer', 'biginteger', 'float', 'decimal'].includes(type)) {\n    readableType = 'number';\n  } else if (['string'].includes(type)) {\n    readableType = 'text';\n  }\n\n  var contentType = (0, _get[\"default\"])(contentTypes, [target], {});\n  var contentTypeFriendlyName = (0, _get[\"default\"])(contentType, ['schema', 'displayName'], '');\n  var isPluginContentType = (0, _get[\"default\"])(contentType, 'plugin');\n  var src = target ? 'relation' : ico;\n\n  var handleClick = function handleClick() {\n    if (isMorph) {\n      return;\n    }\n\n    if (configurable !== false) {\n      var attrType = type;\n      onClick( // Tells where the attribute is located in the main modifiedData object : contentType, component or components\n      editTarget, // main data type uid\n      secondLoopComponentUid || firstLoopComponentUid || targetUid, // Name of the attribute\n      name, // Type of the attribute\n      attrType);\n    }\n  };\n\n  var loopNumber;\n\n  if (secondLoopComponentUid && firstLoopComponentUid) {\n    loopNumber = 2;\n  } else if (firstLoopComponentUid) {\n    loopNumber = 1;\n  } else {\n    loopNumber = 0;\n  }\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_BoxWrapper[\"default\"], (0, _extends2[\"default\"])({\n    as: \"tr\"\n  }, (0, _helperPlugin.onRowClick)({\n    fn: handleClick,\n    condition: isInDevelopmentMode && configurable && !isMorph\n  })), /*#__PURE__*/_react[\"default\"].createElement(\"td\", {\n    style: {\n      position: 'relative'\n    }\n  }, loopNumber !== 0 && /*#__PURE__*/_react[\"default\"].createElement(_Curve[\"default\"], {\n    color: isFromDynamicZone ? 'primary200' : 'neutral150'\n  }), /*#__PURE__*/_react[\"default\"].createElement(_Stack.Stack, {\n    paddingLeft: 2,\n    spacing: 4,\n    horizontal: true\n  }, /*#__PURE__*/_react[\"default\"].createElement(_AttributeIcon[\"default\"], {\n    key: src,\n    type: src\n  }), /*#__PURE__*/_react[\"default\"].createElement(_Typography.Typography, {\n    fontWeight: \"bold\"\n  }, name))), /*#__PURE__*/_react[\"default\"].createElement(\"td\", null, target ? /*#__PURE__*/_react[\"default\"].createElement(_Typography.Typography, null, formatMessage({\n    id: (0, _getTrad[\"default\"])(\"modelPage.attribute.\".concat(isMorph ? 'relation-polymorphic' : 'relationWith')),\n    defaultMessage: 'Relation with'\n  }), \"\\xA0\", /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    style: {\n      fontStyle: 'italic'\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(_UpperFirst[\"default\"], {\n    content: contentTypeFriendlyName\n  }), \"\\xA0\", isPluginContentType && \"(\".concat(formatMessage({\n    id: (0, _getTrad[\"default\"])(\"from\"),\n    defaultMessage: 'from'\n  }), \": \").concat(isPluginContentType, \")\"))) : /*#__PURE__*/_react[\"default\"].createElement(_Typography.Typography, null, formatMessage({\n    id: (0, _getTrad[\"default\"])(\"attribute.\".concat(readableType)),\n    defaultMessage: type\n  }), \"\\xA0\", repeatable && formatMessage({\n    id: (0, _getTrad[\"default\"])('component.repeatable'),\n    defaultMessage: '(repeatable)'\n  }))), /*#__PURE__*/_react[\"default\"].createElement(\"td\", null, isInDevelopmentMode ? /*#__PURE__*/_react[\"default\"].createElement(_Flex.Flex, (0, _extends2[\"default\"])({\n    justifyContent: \"flex-end\"\n  }, _helperPlugin.stopPropagation), configurable ? /*#__PURE__*/_react[\"default\"].createElement(_Stack.Stack, {\n    horizontal: true,\n    spacing: 1\n  }, !isMorph && /*#__PURE__*/_react[\"default\"].createElement(_IconButton.IconButton, {\n    onClick: handleClick,\n    label: \"\".concat(formatMessage({\n      id: 'app.utils.edit',\n      formatMessage: 'Edit'\n    }), \" \").concat(name),\n    noBorder: true,\n    icon: /*#__PURE__*/_react[\"default\"].createElement(_Pencil[\"default\"], null)\n  }), /*#__PURE__*/_react[\"default\"].createElement(_IconButton.IconButton, {\n    onClick: function onClick(e) {\n      e.stopPropagation();\n      removeAttribute(editTarget, name, secondLoopComponentUid || firstLoopComponentUid || '');\n    },\n    label: \"\".concat(formatMessage({\n      id: 'app.utils.delete',\n      defaultMessage: 'Delete'\n    }), \" \").concat(name),\n    noBorder: true,\n    icon: /*#__PURE__*/_react[\"default\"].createElement(_Trash[\"default\"], null)\n  })) : /*#__PURE__*/_react[\"default\"].createElement(_Lock[\"default\"], null)) :\n  /*#__PURE__*/\n\n  /*\n    In production mode the edit icons aren't visible, therefore\n    we need to reserve the same space, otherwise the height of the\n    row might collapse, leading to bad positioned curve icons\n  */\n  _react[\"default\"].createElement(_Box.Box, {\n    height: (0, _helperPlugin.pxToRem)(32)\n  })));\n}\n\nListRow.defaultProps = {\n  configurable: true,\n  firstLoopComponentUid: null,\n  isFromDynamicZone: false,\n  onClick: function onClick() {},\n  relation: '',\n  repeatable: false,\n  secondLoopComponentUid: null,\n  target: null,\n  targetUid: null,\n  type: null\n};\nListRow.propTypes = {\n  configurable: _propTypes[\"default\"].bool,\n  editTarget: _propTypes[\"default\"].string.isRequired,\n  firstLoopComponentUid: _propTypes[\"default\"].string,\n  isFromDynamicZone: _propTypes[\"default\"].bool,\n  name: _propTypes[\"default\"].string.isRequired,\n  onClick: _propTypes[\"default\"].func,\n  relation: _propTypes[\"default\"].string,\n  repeatable: _propTypes[\"default\"].bool,\n  secondLoopComponentUid: _propTypes[\"default\"].string,\n  target: _propTypes[\"default\"].string,\n  targetUid: _propTypes[\"default\"].string,\n  type: _propTypes[\"default\"].string\n};\n\nvar _default = /*#__PURE__*/(0, _react.memo)(ListRow);\n\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}