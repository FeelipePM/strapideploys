{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FromUrlForm = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _Box = require(\"@strapi/design-system/Box\");\n\nvar _ModalLayout = require(\"@strapi/design-system/ModalLayout\");\n\nvar _Textarea = require(\"@strapi/design-system/Textarea\");\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _Button = require(\"@strapi/design-system/Button\");\n\nvar _helperPlugin = require(\"@strapi/helper-plugin\");\n\nvar _formik = require(\"formik\");\n\nvar _getTrad = _interopRequireDefault(require(\"../../../utils/getTrad\"));\n\nvar _urlYupSchema = require(\"../../../utils/urlYupSchema\");\n\nvar _urlsToAssets = require(\"../../../utils/urlsToAssets\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar FromUrlForm = function FromUrlForm(_ref) {\n  var onClose = _ref.onClose,\n      onAddAsset = _ref.onAddAsset,\n      trackedLocation = _ref.trackedLocation;\n\n  var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(undefined),\n      _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n\n  var _useIntl = (0, _reactIntl.useIntl)(),\n      formatMessage = _useIntl.formatMessage;\n\n  var _useTracking = (0, _helperPlugin.useTracking)(),\n      trackUsage = _useTracking.trackUsage;\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref3 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(_ref2) {\n      var urls, urlArray, assets;\n      return _regenerator[\"default\"].wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              urls = _ref2.urls;\n              setLoading(true);\n              urlArray = urls.split(/\\r?\\n/);\n              _context.prev = 3;\n              _context.next = 6;\n              return (0, _urlsToAssets.urlsToAssets)(urlArray);\n\n            case 6:\n              assets = _context.sent;\n\n              if (trackedLocation) {\n                trackUsage('didSelectFile', {\n                  source: 'url',\n                  location: trackedLocation\n                });\n              } // no need to set the loading to false since the component unmounts\n\n\n              onAddAsset(assets);\n              _context.next = 15;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](3);\n              setError(_context.t0);\n              setLoading(false);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[3, 11]]);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_formik.Formik, {\n    enableReinitialize: true,\n    initialValues: {\n      urls: ''\n    },\n    onSubmit: handleSubmit,\n    validationSchema: _urlYupSchema.urlSchema,\n    validateOnChange: false\n  }, function (_ref4) {\n    var values = _ref4.values,\n        errors = _ref4.errors,\n        handleChange = _ref4.handleChange;\n    return /*#__PURE__*/_react[\"default\"].createElement(_helperPlugin.Form, {\n      noValidate: true\n    }, /*#__PURE__*/_react[\"default\"].createElement(_Box.Box, {\n      paddingLeft: 8,\n      paddingRight: 8,\n      paddingBottom: 6,\n      paddingTop: 6\n    }, /*#__PURE__*/_react[\"default\"].createElement(_Textarea.Textarea, {\n      label: formatMessage({\n        id: (0, _getTrad[\"default\"])('input.url.label'),\n        defaultMessage: 'URL'\n      }),\n      name: \"urls\",\n      hint: formatMessage({\n        id: (0, _getTrad[\"default\"])('input.url.description'),\n        defaultMessage: 'Separate your URL links by a carriage return.'\n      }),\n      error: (error === null || error === void 0 ? void 0 : error.message) || (errors.urls ? formatMessage({\n        id: errors.urls,\n        defaultMessage: 'An error occured'\n      }) : undefined),\n      onChange: handleChange\n    }, values.urls)), /*#__PURE__*/_react[\"default\"].createElement(_ModalLayout.ModalFooter, {\n      startActions: /*#__PURE__*/_react[\"default\"].createElement(_Button.Button, {\n        onClick: onClose,\n        variant: \"tertiary\"\n      }, formatMessage({\n        id: 'app.components.Button.cancel',\n        defaultMessage: 'cancel'\n      })),\n      endActions: /*#__PURE__*/_react[\"default\"].createElement(_Button.Button, {\n        type: \"submit\",\n        loading: loading\n      }, formatMessage({\n        id: (0, _getTrad[\"default\"])('button.next'),\n        defaultMessage: 'Next'\n      }))\n    }));\n  });\n};\n\nexports.FromUrlForm = FromUrlForm;\nFromUrlForm.defaultProps = {\n  trackedLocation: undefined\n};\nFromUrlForm.propTypes = {\n  onClose: _propTypes[\"default\"].func.isRequired,\n  onAddAsset: _propTypes[\"default\"].func.isRequired,\n  trackedLocation: _propTypes[\"default\"].string\n};","map":null,"metadata":{},"sourceType":"script"}