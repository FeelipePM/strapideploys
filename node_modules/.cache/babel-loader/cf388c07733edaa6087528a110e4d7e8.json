{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _get = _interopRequireDefault(require(\"lodash/get\"));\n\nvar _helperPlugin = require(\"@strapi/helper-plugin\");\n\nvar _Box = require(\"@strapi/design-system/Box\");\n\nvar _Grid = require(\"@strapi/design-system/Grid\");\n\nvar _Typography = require(\"@strapi/design-system/Typography\");\n\n/**\n *\n * TabForm\n *\n */\n\n/* eslint-disable react/no-array-index-key */\nvar TabForm = function TabForm(_ref) {\n  var form = _ref.form,\n      formErrors = _ref.formErrors,\n      genericInputProps = _ref.genericInputProps,\n      modifiedData = _ref.modifiedData,\n      onChange = _ref.onChange;\n\n  var _useIntl = (0, _reactIntl.useIntl)(),\n      formatMessage = _useIntl.formatMessage;\n\n  return form.map(function (section, sectionIndex) {\n    // Don't display an empty section\n    if (section.items.length === 0) {\n      return null;\n    }\n\n    return /*#__PURE__*/_react[\"default\"].createElement(_Box.Box, {\n      key: sectionIndex\n    }, section.sectionTitle && /*#__PURE__*/_react[\"default\"].createElement(_Box.Box, {\n      paddingBottom: 4\n    }, /*#__PURE__*/_react[\"default\"].createElement(_Typography.Typography, {\n      variant: \"delta\",\n      as: \"h3\"\n    }, formatMessage(section.sectionTitle))), /*#__PURE__*/_react[\"default\"].createElement(_Grid.Grid, {\n      gap: 4\n    }, section.items.map(function (input, i) {\n      var key = \"\".concat(sectionIndex, \".\").concat(i);\n      var value = (0, _get[\"default\"])(modifiedData, input.name, ''); // When extending the yup schema of an existing field (like in https://github.com/strapi/strapi/blob/293ff3b8f9559236609d123a2774e3be05ce8274/packages/strapi-plugin-i18n/admin/src/index.js#L52)\n      // and triggering a yup validation error in the UI (missing a required field for example)\n      // We got an object that looks like: formErrors = { \"pluginOptions.i18n.localized\": {...} }\n      // In order to deal with this error, we can't rely on lodash.get to resolve this key\n      // - lodash will try to access {pluginOptions: {i18n: {localized: true}}})\n      // - and we just want to access { \"pluginOptions.i18n.localized\": {...} }\n      // NOTE: this is a hack\n\n      var pluginOptionError = Object.keys(formErrors).find(function (key) {\n        return key === input.name;\n      }); // Retrieve the error for a specific input\n\n      var errorId = pluginOptionError ? formErrors[pluginOptionError].id : (0, _get[\"default\"])(formErrors, [].concat((0, _toConsumableArray2[\"default\"])(input.name.split('.') // The filter here is used when creating a component\n      // in the component step 1 modal\n      // Since the component info is stored in the\n      // componentToCreate object we can access the error\n      // By removing the key\n      .filter(function (key) {\n        return key !== 'componentToCreate';\n      })), ['id']), null);\n\n      if (input.type === 'pushRight') {\n        return /*#__PURE__*/_react[\"default\"].createElement(_Grid.GridItem, {\n          col: input.size || 6,\n          key: input.name || key\n        }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", null));\n      }\n\n      return /*#__PURE__*/_react[\"default\"].createElement(_Grid.GridItem, {\n        col: input.size || 6,\n        key: input.name || key\n      }, /*#__PURE__*/_react[\"default\"].createElement(_helperPlugin.GenericInput, (0, _extends2[\"default\"])({}, input, genericInputProps, {\n        error: errorId,\n        onChange: onChange,\n        value: value\n      })));\n    })));\n  });\n};\n\nTabForm.propTypes = {\n  form: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].object).isRequired,\n  formErrors: _propTypes[\"default\"].object.isRequired,\n  genericInputProps: _propTypes[\"default\"].object.isRequired,\n  modifiedData: _propTypes[\"default\"].object.isRequired,\n  onChange: _propTypes[\"default\"].func.isRequired\n};\nvar _default = TabForm;\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}