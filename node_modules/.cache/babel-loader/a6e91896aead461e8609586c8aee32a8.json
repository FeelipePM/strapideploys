{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _Flex = require(\"@strapi/design-system/Flex\");\n\nvar _Box = require(\"@strapi/design-system/Box\");\n\nvar _Tooltip = require(\"@strapi/design-system/Tooltip\");\n\nvar _Typography = require(\"@strapi/design-system/Typography\");\n\nvar _Popover = require(\"@strapi/design-system/Popover\");\n\nvar _helperPlugin = require(\"@strapi/helper-plugin\");\n\nvar _get = _interopRequireDefault(require(\"lodash/get\"));\n\nvar _selectI18nLocales = _interopRequireDefault(require(\"../../selectors/selectI18nLocales\"));\n\nvar _utils = require(\"../../utils\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar Button = /*#__PURE__*/_styledComponents[\"default\"].button.withConfig({\n  displayName: \"LocaleListCell__Button\",\n  componentId: \"sc-16nsr2u-0\"\n})([\"svg{> g,path{fill:\", \";}}&:hover{svg{> g,path{fill:\", \";}}}&:active{svg{> g,path{fill:\", \";}}}\"], function (_ref) {\n  var theme = _ref.theme;\n  return theme.colors.neutral500;\n}, function (_ref2) {\n  var theme = _ref2.theme;\n  return theme.colors.neutral600;\n}, function (_ref3) {\n  var theme = _ref3.theme;\n  return theme.colors.neutral400;\n});\n\nvar ActionWrapper = /*#__PURE__*/_styledComponents[\"default\"].div.withConfig({\n  displayName: \"LocaleListCell__ActionWrapper\",\n  componentId: \"sc-16nsr2u-1\"\n})([\"display:flex;align-items:center;justify-content:center;height:\", \"rem;width:\", \"rem;svg{height:\", \"rem;}\"], 32 / 16, 32 / 16, 4 / 16);\n\nvar mapToLocaleName = function mapToLocaleName(locales, localeCode) {\n  return (0, _get[\"default\"])(locales.find(function (_ref4) {\n    var code = _ref4.code;\n    return code === localeCode;\n  }), 'name', localeCode);\n};\n\nvar LocaleListCell = function LocaleListCell(_ref5) {\n  var localizations = _ref5.localizations,\n      currentLocaleCode = _ref5.locale,\n      id = _ref5.id;\n  var locales = (0, _reactRedux.useSelector)(_selectI18nLocales[\"default\"]);\n  var allLocalizations = [{\n    locale: currentLocaleCode\n  }].concat((0, _toConsumableArray2[\"default\"])(localizations));\n  var localizationNames = allLocalizations.map(function (locale) {\n    return locale.locale;\n  });\n  var defaultLocale = locales.find(function (locale) {\n    return locale.isDefault;\n  });\n  var hasDefaultLocale = localizationNames.includes(defaultLocale.code);\n\n  var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      visible = _useState2[0],\n      setVisible = _useState2[1];\n\n  var buttonRef = (0, _react.useRef)();\n\n  var _useIntl = (0, _reactIntl.useIntl)(),\n      formatMessage = _useIntl.formatMessage;\n\n  var localesArray = [];\n\n  if (hasDefaultLocale) {\n    var ctLocalesWithoutDefault = localizationNames.filter(function (locale) {\n      return locale !== defaultLocale.code;\n    });\n    var ctLocalesNamesWithoutDefault = ctLocalesWithoutDefault.map(function (locale) {\n      return mapToLocaleName(locales, locale);\n    });\n    ctLocalesNamesWithoutDefault.sort();\n    var ctLocalesNamesWithDefault = [\"\".concat(defaultLocale.name, \" (default)\")].concat((0, _toConsumableArray2[\"default\"])(ctLocalesNamesWithoutDefault));\n    localesArray = ctLocalesNamesWithDefault;\n  } else {\n    var ctLocales = localizationNames.map(function (locale) {\n      return mapToLocaleName(locales, locale);\n    });\n    ctLocales.sort();\n    localesArray = ctLocales;\n  }\n\n  var handleTogglePopover = function handleTogglePopover() {\n    return setVisible(function (prev) {\n      return !prev;\n    });\n  };\n\n  var elId = \"entry-\".concat(id, \"__locale\");\n  var localesNames = localesArray.join(', ');\n  return /*#__PURE__*/_react[\"default\"].createElement(_Flex.Flex, _helperPlugin.stopPropagation, /*#__PURE__*/_react[\"default\"].createElement(_Tooltip.Tooltip, {\n    label: formatMessage({\n      id: (0, _utils.getTrad)('CMListView.popover.display-locales.label'),\n      defaultMessage: 'Display translated locales'\n    })\n  }, /*#__PURE__*/_react[\"default\"].createElement(Button, {\n    type: \"button\",\n    onClick: handleTogglePopover,\n    ref: buttonRef\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Flex.Flex, null, /*#__PURE__*/_react[\"default\"].createElement(_Typography.Typography, {\n    style: {\n      maxWidth: '252px',\n      cursor: 'pointer'\n    },\n    \"data-for\": elId,\n    \"data-tip\": localesNames,\n    textColor: \"neutral800\",\n    ellipsis: true\n  }, localesNames), /*#__PURE__*/_react[\"default\"].createElement(ActionWrapper, null, /*#__PURE__*/_react[\"default\"].createElement(_helperPlugin.SortIcon, null), visible && /*#__PURE__*/_react[\"default\"].createElement(_Popover.Popover, {\n    source: buttonRef,\n    spacing: 16,\n    centered: true\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"ul\", null, localesArray.map(function (name) {\n    return /*#__PURE__*/_react[\"default\"].createElement(_Box.Box, {\n      key: name,\n      padding: 3,\n      as: \"li\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(_Typography.Typography, null, name));\n  }))))))));\n};\n\nLocaleListCell.propTypes = {\n  id: _propTypes[\"default\"].number.isRequired,\n  localizations: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].shape({\n    locale: _propTypes[\"default\"].string.isRequired\n  })).isRequired,\n  locale: _propTypes[\"default\"].string.isRequired\n};\nvar _default = LocaleListCell;\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}