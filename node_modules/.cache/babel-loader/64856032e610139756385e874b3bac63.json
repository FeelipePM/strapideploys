{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _codemirror = _interopRequireDefault(require(\"codemirror\"));\n\nrequire(\"codemirror/addon/display/placeholder\");\n\nvar _PreviewWysiwyg = _interopRequireDefault(require(\"../PreviewWysiwyg\"));\n\nvar _EditorStylesContainer = require(\"./EditorStylesContainer\");\n\nvar _WysiwygStyles = require(\"./WysiwygStyles\");\n\nvar _continueList = _interopRequireDefault(require(\"./utils/continueList\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar Editor = function Editor(_ref) {\n  var disabled = _ref.disabled,\n      editorRef = _ref.editorRef,\n      error = _ref.error,\n      isPreviewMode = _ref.isPreviewMode,\n      isExpandMode = _ref.isExpandMode,\n      name = _ref.name,\n      onChange = _ref.onChange,\n      placeholder = _ref.placeholder,\n      textareaRef = _ref.textareaRef,\n      value = _ref.value;\n  var onChangeRef = (0, _react.useRef)(onChange);\n  (0, _react.useEffect)(function () {\n    editorRef.current = _codemirror[\"default\"].fromTextArea(textareaRef.current, {\n      lineWrapping: true,\n      extraKeys: {\n        Enter: 'newlineAndIndentContinueMarkdownList',\n        Tab: false,\n        'Shift-Tab': false\n      },\n      readOnly: false,\n      smartIndent: false,\n      placeholder: placeholder\n    });\n    _codemirror[\"default\"].commands.newlineAndIndentContinueMarkdownList = _continueList[\"default\"];\n    editorRef.current.on('change', function (doc) {\n      onChangeRef.current({\n        target: {\n          name: name,\n          value: doc.getValue(),\n          type: 'wysiwyg'\n        }\n      });\n    });\n  }, [editorRef, textareaRef, name, placeholder]);\n  (0, _react.useEffect)(function () {\n    if (value && !editorRef.current.state.focused) {\n      editorRef.current.setValue(value);\n    }\n  }, [editorRef, value]);\n  (0, _react.useEffect)(function () {\n    if (isPreviewMode || disabled) {\n      editorRef.current.setOption('readOnly', 'nocursor');\n    } else {\n      editorRef.current.setOption('readOnly', false);\n    }\n  }, [disabled, isPreviewMode, editorRef]);\n  (0, _react.useEffect)(function () {\n    if (error) {\n      editorRef.current.setOption('screenReaderLabel', error);\n    } else {\n      // to replace with translation\n      editorRef.current.setOption('screenReaderLabel', 'Editor');\n    }\n  }, [editorRef, error]);\n  return /*#__PURE__*/_react[\"default\"].createElement(_WysiwygStyles.EditorAndPreviewWrapper, null, /*#__PURE__*/_react[\"default\"].createElement(_EditorStylesContainer.EditorStylesContainer, {\n    isExpandMode: isExpandMode,\n    disabled: disabled || isPreviewMode\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"textarea\", {\n    ref: textareaRef\n  })), isPreviewMode && /*#__PURE__*/_react[\"default\"].createElement(_PreviewWysiwyg[\"default\"], {\n    data: value\n  }));\n};\n\nEditor.defaultProps = {\n  disabled: false,\n  error: undefined,\n  isPreviewMode: false,\n  isExpandMode: false,\n  placeholder: '',\n  value: ''\n};\nEditor.propTypes = {\n  disabled: _propTypes[\"default\"].bool,\n  editorRef: _propTypes[\"default\"].shape({\n    current: _propTypes[\"default\"].any\n  }).isRequired,\n  error: _propTypes[\"default\"].string,\n  isPreviewMode: _propTypes[\"default\"].bool,\n  isExpandMode: _propTypes[\"default\"].bool,\n  name: _propTypes[\"default\"].string.isRequired,\n  onChange: _propTypes[\"default\"].func.isRequired,\n  placeholder: _propTypes[\"default\"].string,\n  textareaRef: _propTypes[\"default\"].shape({\n    current: _propTypes[\"default\"].any\n  }).isRequired,\n  value: _propTypes[\"default\"].string\n};\nvar _default = Editor;\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}