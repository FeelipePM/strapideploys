{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _reactRouterDom = require(\"react-router-dom\");\n\nvar _Divider = require(\"@strapi/design-system/Divider\");\n\nvar _MainNav = require(\"@strapi/design-system/MainNav\");\n\nvar _FocusTrap = require(\"@strapi/design-system/FocusTrap\");\n\nvar _Box = require(\"@strapi/design-system/Box\");\n\nvar _Typography = require(\"@strapi/design-system/Typography\");\n\nvar _Stack = require(\"@strapi/design-system/Stack\");\n\nvar _Write = _interopRequireDefault(require(\"@strapi/icons/Write\"));\n\nvar _Exit = _interopRequireDefault(require(\"@strapi/icons/Exit\"));\n\nvar _helperPlugin = require(\"@strapi/helper-plugin\");\n\nvar _useConfigurations2 = _interopRequireDefault(require(\"../../hooks/useConfigurations\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar LinkUserWrapper = /*#__PURE__*/(0, _styledComponents[\"default\"])(_Box.Box).withConfig({\n  displayName: \"LeftMenu__LinkUserWrapper\",\n  componentId: \"sc-d3fut-0\"\n})([\"width:\", \"rem;position:absolute;bottom:\", \";left:\", \";\"], 150 / 16, function (_ref) {\n  var theme = _ref.theme;\n  return theme.spaces[9];\n}, function (_ref2) {\n  var theme = _ref2.theme;\n  return theme.spaces[5];\n});\nvar LinkUser = /*#__PURE__*/(0, _styledComponents[\"default\"])(_reactRouterDom.NavLink).withConfig({\n  displayName: \"LeftMenu__LinkUser\",\n  componentId: \"sc-d3fut-1\"\n})([\"display:flex;justify-content:space-between;align-items:center;text-decoration:none;padding:\", \";border-radius:\", \";&:hover{background:\", \";text-decoration:none;}svg{path{fill:\", \";}}\"], function (_ref3) {\n  var theme = _ref3.theme;\n  return \"\".concat(theme.spaces[2], \" \").concat(theme.spaces[4]);\n}, function (_ref4) {\n  var theme = _ref4.theme;\n  return theme.spaces[1];\n}, function (_ref5) {\n  var theme = _ref5.theme,\n      logout = _ref5.logout;\n  return logout ? theme.colors.danger100 : theme.colors.primary100;\n}, function (_ref6) {\n  var theme = _ref6.theme;\n  return theme.colors.danger600;\n});\n\nvar LeftMenu = function LeftMenu(_ref7) {\n  var generalSectionLinks = _ref7.generalSectionLinks,\n      pluginsSectionLinks = _ref7.pluginsSectionLinks;\n  var buttonRef = (0, _react.useRef)();\n\n  var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      userLinksVisible = _useState2[0],\n      setUserLinksVisible = _useState2[1];\n\n  var _useConfigurations = (0, _useConfigurations2[\"default\"])(),\n      menuLogo = _useConfigurations.menuLogo;\n\n  var _usePersistentState = (0, _helperPlugin.usePersistentState)('navbar-condensed', false),\n      _usePersistentState2 = (0, _slicedToArray2[\"default\"])(_usePersistentState, 2),\n      condensed = _usePersistentState2[0],\n      setCondensed = _usePersistentState2[1];\n\n  var _useAppInfos = (0, _helperPlugin.useAppInfos)(),\n      userDisplayName = _useAppInfos.userDisplayName;\n\n  var _useIntl = (0, _reactIntl.useIntl)(),\n      formatMessage = _useIntl.formatMessage;\n\n  var initials = userDisplayName.split(' ').map(function (name) {\n    return name.substring(0, 1);\n  }).join('').substring(0, 2);\n\n  var handleToggleUserLinks = function handleToggleUserLinks() {\n    return setUserLinksVisible(function (prev) {\n      return !prev;\n    });\n  };\n\n  var handleLogout = function handleLogout() {\n    _helperPlugin.auth.clearAppStorage();\n\n    handleToggleUserLinks();\n  };\n\n  var handleBlur = function handleBlur(e) {\n    var _e$relatedTarget, _e$relatedTarget$pare;\n\n    if (!e.currentTarget.contains(e.relatedTarget) && ((_e$relatedTarget = e.relatedTarget) === null || _e$relatedTarget === void 0 ? void 0 : (_e$relatedTarget$pare = _e$relatedTarget.parentElement) === null || _e$relatedTarget$pare === void 0 ? void 0 : _e$relatedTarget$pare.id) !== 'main-nav-user-button') {\n      setUserLinksVisible(false);\n    }\n  };\n\n  var menuTitle = formatMessage({\n    id: 'app.components.LeftMenu.navbrand.title',\n    defaultMessage: 'Strapi Dashboard'\n  });\n  return /*#__PURE__*/_react[\"default\"].createElement(_MainNav.MainNav, {\n    condensed: condensed\n  }, /*#__PURE__*/_react[\"default\"].createElement(_MainNav.NavBrand, {\n    workplace: formatMessage({\n      id: 'app.components.LeftMenu.navbrand.workplace',\n      defaultMessage: 'Workplace'\n    }),\n    title: menuTitle,\n    icon: /*#__PURE__*/_react[\"default\"].createElement(\"img\", {\n      src: menuLogo,\n      alt: menuTitle\n    })\n  }), /*#__PURE__*/_react[\"default\"].createElement(_Divider.Divider, null), /*#__PURE__*/_react[\"default\"].createElement(_MainNav.NavSections, null, /*#__PURE__*/_react[\"default\"].createElement(_MainNav.NavLink, {\n    to: \"/content-manager\",\n    icon: /*#__PURE__*/_react[\"default\"].createElement(_Write[\"default\"], null)\n  }, formatMessage({\n    id: 'content-manager.plugin.name',\n    defaultMessage: 'Content manager'\n  })), pluginsSectionLinks.length > 0 ? /*#__PURE__*/_react[\"default\"].createElement(_MainNav.NavSection, {\n    label: \"Plugins\"\n  }, pluginsSectionLinks.map(function (link) {\n    var Icon = link.icon;\n    return /*#__PURE__*/_react[\"default\"].createElement(_MainNav.NavLink, {\n      to: link.to,\n      key: link.to,\n      icon: /*#__PURE__*/_react[\"default\"].createElement(Icon, null)\n    }, formatMessage(link.intlLabel));\n  })) : null, generalSectionLinks.length > 0 ? /*#__PURE__*/_react[\"default\"].createElement(_MainNav.NavSection, {\n    label: \"General\"\n  }, generalSectionLinks.map(function (link) {\n    var LinkIcon = link.icon;\n    return /*#__PURE__*/_react[\"default\"].createElement(_MainNav.NavLink, {\n      badgeContent: link.notificationsCount > 0 && link.notificationsCount.toString() || undefined,\n      to: link.to,\n      key: link.to,\n      icon: /*#__PURE__*/_react[\"default\"].createElement(LinkIcon, null)\n    }, formatMessage(link.intlLabel));\n  })) : null), /*#__PURE__*/_react[\"default\"].createElement(_MainNav.NavUser, {\n    id: \"main-nav-user-button\",\n    ref: buttonRef,\n    onClick: handleToggleUserLinks,\n    initials: initials\n  }, userDisplayName), userLinksVisible && /*#__PURE__*/_react[\"default\"].createElement(LinkUserWrapper, {\n    onBlur: handleBlur,\n    padding: 1,\n    shadow: \"tableShadow\",\n    background: \"neutral0\",\n    hasRadius: true\n  }, /*#__PURE__*/_react[\"default\"].createElement(_FocusTrap.FocusTrap, {\n    onEscape: handleToggleUserLinks\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Stack.Stack, {\n    spacing: 0\n  }, /*#__PURE__*/_react[\"default\"].createElement(LinkUser, {\n    tabIndex: 0,\n    onClick: handleToggleUserLinks,\n    to: \"/me\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Typography.Typography, null, formatMessage({\n    id: 'app.components.LeftMenu.profile',\n    defaultMessage: 'Profile'\n  }))), /*#__PURE__*/_react[\"default\"].createElement(LinkUser, {\n    tabIndex: 0,\n    onClick: handleLogout,\n    logout: \"logout\",\n    to: \"/auth/login\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Typography.Typography, {\n    textColor: \"danger600\"\n  }, formatMessage({\n    id: 'app.components.LeftMenu.logout',\n    defaultMessage: 'Logout'\n  })), /*#__PURE__*/_react[\"default\"].createElement(_Exit[\"default\"], null))))), /*#__PURE__*/_react[\"default\"].createElement(_MainNav.NavCondense, {\n    onClick: function onClick() {\n      return setCondensed(function (s) {\n        return !s;\n      });\n    }\n  }, condensed ? formatMessage({\n    id: 'app.components.LeftMenu.expand',\n    defaultMessage: 'Expand the navbar'\n  }) : formatMessage({\n    id: 'app.components.LeftMenu.collapse',\n    defaultMessage: 'Collapse the navbar'\n  })));\n};\n\nLeftMenu.propTypes = {\n  generalSectionLinks: _propTypes[\"default\"].array.isRequired,\n  pluginsSectionLinks: _propTypes[\"default\"].array.isRequired\n};\nvar _default = LeftMenu;\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}