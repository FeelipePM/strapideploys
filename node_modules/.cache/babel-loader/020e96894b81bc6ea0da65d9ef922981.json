{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nvar _helperPlugin = require(\"@strapi/helper-plugin\");\n\nvar instance = _axios[\"default\"].create({\n  baseURL: process.env.STRAPI_ADMIN_BACKEND_URL\n});\n\ninstance.interceptors.request.use( /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(config) {\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            config.headers = {\n              Authorization: \"Bearer \".concat(_helperPlugin.auth.getToken()),\n              Accept: 'application/json',\n              'Content-Type': 'application/json'\n            };\n            return _context.abrupt(\"return\", config);\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}(), function (error) {\n  Promise.reject(error);\n});\ninstance.interceptors.response.use(function (response) {\n  return response;\n}, function (error) {\n  var _error$response;\n\n  // whatever you want to do with the error\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n    _helperPlugin.auth.clearAppStorage();\n\n    window.location.reload();\n  }\n\n  throw error;\n});\nvar _default = instance;\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}