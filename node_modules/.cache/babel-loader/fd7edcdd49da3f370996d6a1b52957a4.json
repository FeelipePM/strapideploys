{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _Select = require(\"@strapi/design-system/Select\");\n\nvar _reactQuery = require(\"react-query\");\n\nvar _styledComponents = _interopRequireWildcard(require(\"styled-components\"));\n\nvar _Loader = _interopRequireDefault(require(\"@strapi/icons/Loader\"));\n\nvar _utils = require(\"../../../../../../core/utils\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar rotation = /*#__PURE__*/(0, _styledComponents.keyframes)([\"from{transform:rotate(0deg);}to{transform:rotate(359deg);}\"]);\n\nvar LoadingWrapper = /*#__PURE__*/_styledComponents[\"default\"].div.withConfig({\n  displayName: \"SelectRoles__LoadingWrapper\",\n  componentId: \"sc-1z5s3s-0\"\n})([\"animation:\", \" 2s infinite linear;\"], rotation);\n\nvar Loader = function Loader() {\n  return /*#__PURE__*/_react[\"default\"].createElement(LoadingWrapper, null, /*#__PURE__*/_react[\"default\"].createElement(_Loader[\"default\"], null));\n};\n\nvar fetchData = /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee() {\n    var _yield$axiosInstance$, data;\n\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _utils.axiosInstance.get('/admin/roles');\n\n          case 2:\n            _yield$axiosInstance$ = _context.sent;\n            data = _yield$axiosInstance$.data;\n            return _context.abrupt(\"return\", data.data);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function fetchData() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar SelectRoles = function SelectRoles(_ref2) {\n  var disabled = _ref2.disabled,\n      error = _ref2.error,\n      _onChange = _ref2.onChange,\n      value = _ref2.value;\n\n  var _useQuery = (0, _reactQuery.useQuery)(['roles'], fetchData, {\n    staleTime: 50000\n  }),\n      status = _useQuery.status,\n      data = _useQuery.data;\n\n  var _useIntl = (0, _reactIntl.useIntl)(),\n      formatMessage = _useIntl.formatMessage;\n\n  var errorMessage = error ? formatMessage({\n    id: error,\n    defaultMessage: error\n  }) : '';\n  var label = formatMessage({\n    id: 'app.components.Users.ModalCreateBody.block-title.roles',\n    defaultMessage: \"User's roles\"\n  });\n  var hint = formatMessage({\n    id: 'app.components.Users.ModalCreateBody.block-title.roles.description',\n    defaultMessage: 'A user can have one or several roles'\n  });\n  var placeholder = formatMessage({\n    id: 'app.components.Select.placeholder',\n    defaultMessage: 'Select'\n  });\n  var startIcon = status === 'loading' ? /*#__PURE__*/_react[\"default\"].createElement(Loader, null) : undefined;\n  return /*#__PURE__*/_react[\"default\"].createElement(_Select.Select, {\n    id: \"roles\",\n    disabled: disabled,\n    error: errorMessage,\n    hint: hint,\n    label: label,\n    name: \"roles\",\n    onChange: function onChange(v) {\n      _onChange({\n        target: {\n          name: 'roles',\n          value: v\n        }\n      });\n    },\n    placeholder: placeholder,\n    multi: true,\n    startIcon: startIcon,\n    value: value,\n    withTags: true,\n    required: true\n  }, (data || []).map(function (role) {\n    return /*#__PURE__*/_react[\"default\"].createElement(_Select.Option, {\n      key: role.id,\n      value: role.id\n    }, role.name);\n  }));\n};\n\nSelectRoles.defaultProps = {\n  disabled: false,\n  error: undefined\n};\nSelectRoles.propTypes = {\n  disabled: _propTypes[\"default\"].bool,\n  error: _propTypes[\"default\"].string,\n  onChange: _propTypes[\"default\"].func.isRequired,\n  value: _propTypes[\"default\"].array.isRequired\n};\nvar _default = SelectRoles;\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}