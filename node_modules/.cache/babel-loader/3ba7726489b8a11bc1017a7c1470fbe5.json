{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _Field = require(\"@strapi/design-system/Field\");\n\nvar _Stack = require(\"@strapi/design-system/Stack\");\n\nvar _Typography = require(\"@strapi/design-system/Typography\");\n\nvar _formik = require(\"formik\");\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _EventRow = _interopRequireDefault(require(\"./EventRow\"));\n\nvar _formatValue = _interopRequireDefault(require(\"./utils/formatValue\"));\n\nvar StyledTable = /*#__PURE__*/_styledComponents[\"default\"].table.withConfig({\n  displayName: \"EventInput__StyledTable\",\n  componentId: \"sc-1sadnz3-0\"\n})([\"td{height:\", \"rem;width:10%;vertical-align:middle;text-align:center;}tbody tr:nth-child(odd){background:\", \";}tbody tr td:first-child{padding-left:\", \";}\"], 52 / 16, function (_ref) {\n  var theme = _ref.theme;\n  return theme.colors.neutral100;\n}, function (_ref2) {\n  var theme = _ref2.theme;\n  return theme.spaces[7];\n});\n\nvar displayedData = {\n  headers: {\n    \"default\": ['Settings.webhooks.events.create', 'Settings.webhooks.events.update', 'app.utils.delete'],\n    draftAndPublish: ['Settings.webhooks.events.create', 'Settings.webhooks.events.update', 'app.utils.delete', 'app.utils.publish', 'app.utils.unpublish']\n  },\n  events: {\n    \"default\": {\n      entry: ['entry.create', 'entry.update', 'entry.delete'],\n      media: ['media.create', 'media.update', 'media.delete']\n    },\n    draftAndPublish: {\n      entry: ['entry.create', 'entry.update', 'entry.delete', 'entry.publish', 'entry.unpublish'],\n      media: ['media.create', 'media.update', 'media.delete']\n    }\n  }\n};\n\nvar EventInput = function EventInput(_ref3) {\n  var isDraftAndPublish = _ref3.isDraftAndPublish;\n  var headersName = isDraftAndPublish ? displayedData.headers.draftAndPublish : displayedData.headers[\"default\"];\n  var events = isDraftAndPublish ? displayedData.events.draftAndPublish : displayedData.events[\"default\"];\n\n  var _useIntl = (0, _reactIntl.useIntl)(),\n      formatMessage = _useIntl.formatMessage;\n\n  var _useFormikContext = (0, _formik.useFormikContext)(),\n      values = _useFormikContext.values,\n      onChange = _useFormikContext.handleChange;\n\n  var inputName = 'events';\n  var inputValue = values.events;\n  var disabledEvents = [];\n  var formattedValue = (0, _formatValue[\"default\"])(inputValue);\n\n  var handleChange = function handleChange(_ref4) {\n    var _ref4$target = _ref4.target,\n        name = _ref4$target.name,\n        value = _ref4$target.value;\n    var set = new Set(inputValue);\n\n    if (value) {\n      set.add(name);\n    } else {\n      set[\"delete\"](name);\n    }\n\n    onChange({\n      target: {\n        name: inputName,\n        value: Array.from(set)\n      }\n    });\n  };\n\n  var handleChangeAll = function handleChangeAll(_ref5) {\n    var _ref5$target = _ref5.target,\n        name = _ref5$target.name,\n        value = _ref5$target.value;\n    var set = new Set(inputValue);\n\n    if (value) {\n      events[name].forEach(function (event) {\n        if (!disabledEvents.includes(event)) {\n          set.add(event);\n        }\n      });\n    } else {\n      events[name].forEach(function (event) {\n        return set[\"delete\"](event);\n      });\n    }\n\n    onChange({\n      target: {\n        name: inputName,\n        value: Array.from(set)\n      }\n    });\n  };\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_Stack.Stack, {\n    spacing: 1\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Field.FieldLabel, null, formatMessage({\n    id: 'Settings.webhooks.form.events',\n    defaultMessage: 'Events'\n  })), /*#__PURE__*/_react[\"default\"].createElement(StyledTable, null, /*#__PURE__*/_react[\"default\"].createElement(\"thead\", null, /*#__PURE__*/_react[\"default\"].createElement(\"tr\", null, /*#__PURE__*/_react[\"default\"].createElement(\"td\", null), headersName.map(function (header) {\n    if (header === 'app.utils.publish' || header === 'app.utils.unpublish') {\n      return /*#__PURE__*/_react[\"default\"].createElement(\"td\", {\n        key: header,\n        title: formatMessage({\n          id: 'Settings.webhooks.event.publish-tooltip',\n          defaultMessage: 'This event only exists for contents with Draft/Publish system enabled'\n        })\n      }, /*#__PURE__*/_react[\"default\"].createElement(_Typography.Typography, {\n        variant: \"sigma\",\n        textColor: \"neutral600\"\n      }, formatMessage({\n        id: header,\n        defaultMessage: header\n      })));\n    }\n\n    return /*#__PURE__*/_react[\"default\"].createElement(\"td\", {\n      key: header\n    }, /*#__PURE__*/_react[\"default\"].createElement(_Typography.Typography, {\n      variant: \"sigma\",\n      textColor: \"neutral600\"\n    }, formatMessage({\n      id: header,\n      defaultMessage: header\n    })));\n  }))), /*#__PURE__*/_react[\"default\"].createElement(\"tbody\", null, Object.keys(events).map(function (event) {\n    return /*#__PURE__*/_react[\"default\"].createElement(_EventRow[\"default\"], {\n      disabledEvents: disabledEvents,\n      key: event,\n      name: event,\n      events: events[event],\n      inputValue: formattedValue[event],\n      handleChange: handleChange,\n      handleChangeAll: handleChangeAll\n    });\n  }))));\n};\n\nEventInput.propTypes = {\n  isDraftAndPublish: _propTypes[\"default\"].bool.isRequired\n};\nvar _default = EventInput;\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}