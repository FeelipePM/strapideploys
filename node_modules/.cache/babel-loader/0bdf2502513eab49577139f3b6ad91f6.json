{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _get = _interopRequireDefault(require(\"lodash/get\"));\n\nvar _makeUnique = _interopRequireDefault(require(\"../../../utils/makeUnique\"));\n\nvar retrieveComponentsFromSchema = function retrieveComponentsFromSchema(attributes, allComponentsData) {\n  var allComponents = attributes.reduce(function (acc, current) {\n    var type = current.type;\n\n    if (type === 'component') {\n      var currentComponentName = current.component; // Push the existing compo\n\n      acc.push(currentComponentName);\n      var currentComponentAttributes = (0, _get[\"default\"])(allComponentsData, [currentComponentName, 'schema', 'attributes'], []); // Retrieve the nested ones\n\n      acc.push.apply(acc, (0, _toConsumableArray2[\"default\"])(retrieveComponentsFromSchema(currentComponentAttributes, allComponentsData)));\n    }\n\n    if (type === 'dynamiczone') {\n      var dynamicZoneComponents = current.components;\n      var componentsFromDZComponents = dynamicZoneComponents.reduce(function (acc2, currentUid) {\n        var compoAttrs = (0, _get[\"default\"])(allComponentsData, [currentUid, 'schema', 'attributes'], []);\n        return [].concat((0, _toConsumableArray2[\"default\"])(acc2), (0, _toConsumableArray2[\"default\"])(retrieveComponentsFromSchema(compoAttrs, allComponentsData)));\n      }, []);\n      return [].concat((0, _toConsumableArray2[\"default\"])(acc), (0, _toConsumableArray2[\"default\"])(dynamicZoneComponents), (0, _toConsumableArray2[\"default\"])(componentsFromDZComponents));\n    }\n\n    return acc;\n  }, []);\n  return (0, _makeUnique[\"default\"])(allComponents);\n};\n\nvar _default = retrieveComponentsFromSchema;\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}