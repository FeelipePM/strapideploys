{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.createSubCategoryForm = exports.createChildrenDefaultForm = void 0;\n\nvar _lodash = require(\"lodash\");\n\nvar _createDefaultCTFormFromLayout = require(\"./createDefaultCTFormFromLayout\");\n\nvar _findMatchingPermissions = _interopRequireDefault(require(\"./findMatchingPermissions\"));\n\nvar createSubCategoryForm = function createSubCategoryForm(actions, conditions, permissions) {\n  return actions.reduce(function (acc, current) {\n    var foundMatchingPermission = (0, _findMatchingPermissions[\"default\"])(permissions, current.action, null);\n    acc[current.action] = {\n      properties: {\n        enabled: foundMatchingPermission !== undefined\n      },\n      conditions: (0, _createDefaultCTFormFromLayout.createDefaultConditionsForm)(conditions, (0, _lodash.get)(foundMatchingPermission, 'conditions', []))\n    };\n    return acc;\n  }, {});\n};\n\nexports.createSubCategoryForm = createSubCategoryForm;\n\nvar createChildrenDefaultForm = function createChildrenDefaultForm(childrenForm, conditions, initialPermissions) {\n  return childrenForm.reduce(function (acc, current) {\n    acc[current.subCategoryId] = createSubCategoryForm(current.actions, conditions, initialPermissions);\n    return acc;\n  }, {});\n};\n\nexports.createChildrenDefaultForm = createChildrenDefaultForm;\n\nvar createDefaultPluginsFormFromLayout = function createDefaultPluginsFormFromLayout(pluginsLayout, conditions) {\n  var initialPermissions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  return pluginsLayout.reduce(function (acc, _ref) {\n    var categoryId = _ref.categoryId,\n        childrenForm = _ref.childrenForm;\n    var childrenDefaultForm = createChildrenDefaultForm(childrenForm, conditions, initialPermissions);\n    acc[categoryId] = childrenDefaultForm;\n    return acc;\n  }, {});\n};\n\nvar _default = createDefaultPluginsFormFromLayout;\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}