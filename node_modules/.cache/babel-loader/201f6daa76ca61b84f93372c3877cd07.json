{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _helperPlugin = require(\"@strapi/helper-plugin\");\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _formik = require(\"formik\");\n\nvar _Check = _interopRequireDefault(require(\"@strapi/icons/Check\"));\n\nvar _ModalLayout = require(\"@strapi/design-system/ModalLayout\");\n\nvar _Tabs = require(\"@strapi/design-system/Tabs\");\n\nvar _Flex = require(\"@strapi/design-system/Flex\");\n\nvar _Box = require(\"@strapi/design-system/Box\");\n\nvar _Button = require(\"@strapi/design-system/Button\");\n\nvar _Divider = require(\"@strapi/design-system/Divider\");\n\nvar _Typography = require(\"@strapi/design-system/Typography\");\n\nvar _schemas = _interopRequireDefault(require(\"../../schemas\"));\n\nvar _useEditLocale2 = _interopRequireDefault(require(\"../../hooks/useEditLocale\"));\n\nvar _utils = require(\"../../utils\");\n\nvar _BaseForm = _interopRequireDefault(require(\"./BaseForm\"));\n\nvar _AdvancedForm = _interopRequireDefault(require(\"./AdvancedForm\"));\n\nvar ModalEdit = function ModalEdit(_ref) {\n  var locale = _ref.locale,\n      onClose = _ref.onClose;\n\n  var _useRBACProvider = (0, _helperPlugin.useRBACProvider)(),\n      refetchPermissions = _useRBACProvider.refetchPermissions;\n\n  var _useEditLocale = (0, _useEditLocale2[\"default\"])(),\n      isEditing = _useEditLocale.isEditing,\n      editLocale = _useEditLocale.editLocale;\n\n  var _useIntl = (0, _reactIntl.useIntl)(),\n      formatMessage = _useIntl.formatMessage;\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref3 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(_ref2) {\n      var displayName, isDefault;\n      return _regenerator[\"default\"].wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              displayName = _ref2.displayName, isDefault = _ref2.isDefault;\n              _context.next = 3;\n              return editLocale(locale.id, {\n                name: displayName,\n                isDefault: isDefault\n              });\n\n            case 3:\n              _context.next = 5;\n              return refetchPermissions();\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_ModalLayout.ModalLayout, {\n    onClose: onClose,\n    labelledBy: \"edit-locale-title\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_formik.Formik, {\n    initialValues: {\n      code: locale === null || locale === void 0 ? void 0 : locale.code,\n      displayName: (locale === null || locale === void 0 ? void 0 : locale.name) || '',\n      isDefault: Boolean(locale === null || locale === void 0 ? void 0 : locale.isDefault)\n    },\n    onSubmit: handleSubmit,\n    validationSchema: _schemas[\"default\"]\n  }, /*#__PURE__*/_react[\"default\"].createElement(_helperPlugin.Form, null, /*#__PURE__*/_react[\"default\"].createElement(_ModalLayout.ModalHeader, null, /*#__PURE__*/_react[\"default\"].createElement(_Typography.Typography, {\n    fontWeight: \"bold\",\n    textColor: \"neutral800\",\n    as: \"h2\",\n    id: \"edit-locale-title\"\n  }, formatMessage({\n    id: (0, _utils.getTrad)('Settings.list.actions.edit'),\n    defaultMessage: 'Edit a locale'\n  }))), /*#__PURE__*/_react[\"default\"].createElement(_ModalLayout.ModalBody, null, /*#__PURE__*/_react[\"default\"].createElement(_Tabs.TabGroup, {\n    label: formatMessage({\n      id: (0, _utils.getTrad)('Settings.locales.modal.title'),\n      defaultMessage: 'Configurations'\n    }),\n    id: \"tabs\",\n    variant: \"simple\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Flex.Flex, {\n    justifyContent: \"space-between\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Typography.Typography, {\n    as: \"h2\"\n  }, formatMessage({\n    id: (0, _utils.getTrad)('Settings.locales.modal.title'),\n    defaultMessage: 'Configurations'\n  })), /*#__PURE__*/_react[\"default\"].createElement(_Tabs.Tabs, null, /*#__PURE__*/_react[\"default\"].createElement(_Tabs.Tab, null, formatMessage({\n    id: (0, _utils.getTrad)('Settings.locales.modal.base'),\n    defaultMessage: 'Base settings'\n  })), /*#__PURE__*/_react[\"default\"].createElement(_Tabs.Tab, null, formatMessage({\n    id: (0, _utils.getTrad)('Settings.locales.modal.advanced'),\n    defaultMessage: 'Advanced settings'\n  })))), /*#__PURE__*/_react[\"default\"].createElement(_Divider.Divider, null), /*#__PURE__*/_react[\"default\"].createElement(_Box.Box, {\n    paddingTop: 7,\n    paddingBottom: 7\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Tabs.TabPanels, null, /*#__PURE__*/_react[\"default\"].createElement(_Tabs.TabPanel, null, /*#__PURE__*/_react[\"default\"].createElement(_BaseForm[\"default\"], {\n    locale: locale\n  })), /*#__PURE__*/_react[\"default\"].createElement(_Tabs.TabPanel, null, /*#__PURE__*/_react[\"default\"].createElement(_AdvancedForm[\"default\"], {\n    isDefaultLocale: Boolean(locale && locale.isDefault)\n  })))))), /*#__PURE__*/_react[\"default\"].createElement(_ModalLayout.ModalFooter, {\n    startActions: /*#__PURE__*/_react[\"default\"].createElement(_Button.Button, {\n      variant: \"tertiary\",\n      onClick: onClose\n    }, formatMessage({\n      id: 'app.components.Button.cancel'\n    })),\n    endActions: /*#__PURE__*/_react[\"default\"].createElement(_Button.Button, {\n      type: \"submit\",\n      startIcon: /*#__PURE__*/_react[\"default\"].createElement(_Check[\"default\"], null),\n      disabled: isEditing\n    }, formatMessage({\n      id: 'app.components.Button.save'\n    }))\n  }))));\n};\n\nModalEdit.defaultProps = {\n  locale: undefined\n};\nModalEdit.propTypes = {\n  locale: _propTypes[\"default\"].shape({\n    id: _propTypes[\"default\"].number.isRequired,\n    name: _propTypes[\"default\"].string.isRequired,\n    code: _propTypes[\"default\"].string.isRequired,\n    isDefault: _propTypes[\"default\"].bool.isRequired\n  }),\n  onClose: _propTypes[\"default\"].func.isRequired\n};\nvar _default = ModalEdit;\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}